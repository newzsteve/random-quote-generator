var quotes = [
  {
    quote: "Given the choice of anyone in the world, whom would you want as a dinner guest?",
    source: "The 36 Questions That Lead to Love, New York Times"
  },
  {
    quote: "Would you like to be famous? In what way?",
    source: "The 36 Questions That Lead to Love, New York Times"
  },
  {
    quote: "Before making a telephone call, do you ever rehearse what you are going to say? Why?",
    source: "The 36 Questions That Lead to Love, New York Times"
  },
  {
    quote: "What would constitute a “perfect” day for you?",
    source: "The 36 Questions That Lead to Love, New York Times"
  },
  {
    quote: "When did you last sing to yourself? To someone else?",
    source: "The 36 Questions That Lead to Love, New York Times"
  },
    {
    quote: "Given the choice of anyone in the world, whom would you want as a dinner guest?",
    source: "The 36 Questions That Lead to Love, New York Times"
  },
  {
    quote: "Would you like to be famous? In what way?",
    source: "The 36 Questions That Lead to Love, New York Times"
  },
  {
    quote: "Before making a telephone call, do you ever rehearse what you are going to say? Why?",
    source: "The 36 Questions That Lead to Love, New York Times"
  },
  {
    quote: "Do you have a secret hunch about how you will die?",
    source: "The 36 Questions That Lead to Love, New York Times"
  },
  {
    quote: "Name three things you and your partner appear to have in common.",
    source: "The 36 Questions That Lead to Love, New York Times"
  },
  {
    quote: "If you were able to live to the age of 90 and retain either the mind or body of a 30-year-old for the last 60 years of your life, which would you want?",
    source: "The 36 Questions That Lead to Love, New York Times",
    citation: "https://www.nytimes.com/2015/01/11/style/36-questions-that-lead-to-love.html",
    year: 1933,
    tags: ["Hope", "Politics"]
  },
  {
   quote: "If you could change anything about the way you were raised, what would it be?",
   source: "The 36 Questions That Lead to Love, New York Times"
 },
{
    quote: "Take four minutes and tell your partner your life story in as much detail as possible.",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "If a crystal ball could tell you the truth about yourself, your life, the future or anything else, what would you want to know?",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "Is there something that you’ve dreamed of doing for a long time? Why haven’t you done it?",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "What do you value most in a friendship?",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "What is your most treasured memory?",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "What is your most terrible memory?",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "If you knew that in one year you would die suddenly, would you change anything about the way you are now living? Why?",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "What does friendship mean to you?",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "What roles do love and affection play in your life?",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "Alternate sharing something you consider a positive characteristic of your partner. Share a total of five items.",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "How close and warm is your family? Do you feel your childhood was happier than most other people’s?",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "How do you feel about your relationship with your mother?",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "Make three true “we” statements each. For instance, “We are both in this room feeling ... “",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "Complete this sentence: “I wish I had someone with whom I could share ... “",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "If you were going to become a close friend with your partner, please share what would be important for him or her to know.",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "Tell your partner what you like about them; be very honest this time, saying things that you might not say to someone you’ve just met.",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "Share with your partner an embarrassing moment in your life.",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "When did you last cry in front of another person? By yourself?",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "Tell your partner something that you like about them already.",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "What, if anything, is too serious to be joked about?",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "If you were to die this evening with no opportunity to communicate with anyone, what would you most regret not having told someone? Why haven’t you told them yet?",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "Your house, containing everything you own, catches fire. After saving your loved ones and pets, you have time to safely make a final dash to save any one item. What would it be? Why?",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "Of all the people in your family, whose death would you find most disturbing? Why?",
    source: "The 36 Questions That Lead to Love, New York Times"
},
{
    quote: "Share a personal problem and ask your partner’s advice on how he or she might handle it. Also, ask your partner to reflect back to you how you seem to be feeling about the problem you have chosen.",
    source: "The 36 Questions That Lead to Love, New York Times"
}
];

// CSS Color Names
// Compiled by @bobspace.
//
// A javascript array containing all of the color names listed in the CSS Spec.
// The full list can be found here: http://www.w3schools.com/cssref/css_colornames.asp
// Use it as you please, 'cuz you can't, like, own a color, man.
// I deleted colors that didn't provide sufficient contrast or seemed particularly grating.

var CSS_COLOR_NAMES = ["Blue", "BlueViolet", "Brown", "BurlyWood", "CadetBlue", "Chocolate", "Coral", "CornflowerBlue", "Crimson", "DarkBlue", "DarkCyan", "DarkGoldenRod", "DarkGray", "DarkGrey", "DarkGreen", "DarkKhaki", "DarkMagenta", "DarkOliveGreen", "Darkorange", "DarkOrchid", "DarkRed", "DarkSalmon", "DarkSeaGreen", "DarkSlateBlue", "DarkSlateGray", "DarkSlateGrey", "DarkTurquoise", "DarkViolet", "DeepPink", "DeepSkyBlue", "FireBrick", "ForestGreen", "Fuchsia", "Green", "HotPink", "IndianRed", "Indigo", "Magenta", "Maroon", "MediumAquaMarine", "MediumBlue", "MediumOrchid", "MediumPurple", "MediumSeaGreen", "MediumSlateBlue", "MediumTurquoise", "MediumVioletRed", "MidnightBlue", "Olive", "OliveDrab", "Orange", "OrangeRed", "Orchid", "Pink", "Plum", "PowderBlue", "Purple", "RosyBrown", "RoyalBlue", "SaddleBrown", "Salmon", "SlateBlue", "SlateGray", "SlateGrey", "SpringGreen", "SteelBlue", "Teal", "Thistle", "Tomato", "Turquoise", "Violet"];

var quoteIndex = 0;
var colorIndex = 0;
var quotesUsed = [];
var intervalID;

// const keyword is not supported in IE
var NUMBER_OF_QUOTES = 38;
var CHANGE_INTERVAL = 1000000;

// From https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random

// Returns a random integer between min (included) and max (included)
// Using Math.round() will give you a non-uniform distribution!

function getRandomIntInclusive(min, max) {
  min = Math.ceil(min);
  max = Math.floor(max);
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

function emptyQuotesArray() {
  quotesUsed = [];
  console.log("Emptied queue; Start fresh.");
}

function allQuotesUsed() {
  return (quotesUsed.length === NUMBER_OF_QUOTES);
}

function getRandomQuote() {

  do {

    quoteIndex = getRandomIntInclusive(0, 5);

  } while (quotesUsed.includes(quoteIndex));

  quotesUsed.push(quoteIndex);

  logQuoteToConsole(quoteIndex);

  if (allQuotesUsed()) {
    emptyQuotesArray();
  }

  return quotes[quoteIndex];
}

function getRandomColor() {

  colorIndex = getRandomIntInclusive(0, CSS_COLOR_NAMES.length - 1);
  return CSS_COLOR_NAMES[colorIndex];
}

function logQuoteToConsole(quoteIndex) {
  console.log(quoteIndex, ': ', quotes[quoteIndex].quote.slice(0, 20));
}

function formatQuote(quote) {

  var formattedQuote =
    '<p class="quote">' + quote.quote + '</p>' +
    '<p class="source">' + quote.source;

  // http://stackoverflow.com/questions/27509/detecting-an-undefined-object-property

  if (typeof quote.citation !== "undefined") {
    formattedQuote += '<span class="citation">' + quote.citation + '</span>';
  }
  if (typeof quote.year !== "undefined") {
    formattedQuote += '<span class="year">' + quote.year + '</span>';
  }
  if (typeof quote.tags !== "undefined") {
    formattedQuote += '<p class="tags">' + quote.tags.join(', ') + '</p>';
  }

  formattedQuote += '</p>';
  return formattedQuote;

}

function changeBackground() {

  document.getElementById("bgcolor").style.backgroundColor = getRandomColor();

}

function resetTimer() {

  if (intervalID) {
    window.clearInterval(intervalID);
    intervalID = setInterval(printQuote, CHANGE_INTERVAL);
  }

}

function printQuote() {

  resetTimer();
  document.getElementById('quote-box').innerHTML = formatQuote(getRandomQuote());
  changeBackground();

}

printQuote();

// set the interval to change the quote to the defined interval
intervalID = window.setInterval(printQuote, CHANGE_INTERVAL);


document.getElementById('loadQuote').addEventListener("click", printQuote, false);

